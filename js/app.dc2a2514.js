(function(e){function t(t){for(var o,a,u=t[0],s=t[1],c=t[2],f=0,p=[];f<u.length;f++)a=u[f],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);l&&l(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,u=1;u<n.length;u++){var s=n[u];0!==r[s]&&(o=!1)}o&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={app:0},i=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/countdown1/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("CounterPage")],1)},i=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",[n("el-col",{attrs:{span:24}},[n("AddCounter"),n("transition-group",{attrs:{name:"el-fade-in"}},e._l(e.countDownMap,(function(e){return n("div",{key:e.index},[n("CounterListItem",{attrs:{createAt:e.createAt,countType:e.countType,index:e.index,dueDate:e.dueDate,history:e.history,countTitle:e.countTitle}})],1)})),0)],1)],1)},u=[],s=(n("d3b7"),n("ddb0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",[n("el-col",{attrs:{span:24}},[e._v(" "+e._s(e.countTitle)+" "+e._s(e.helpWord)+" "+e._s(e.daysWord)+" "),n("el-button",{attrs:{type:"success",icon:"el-icon-refresh-right",circle:""},on:{click:e.resetCount}}),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:e.removeSelf}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-time",circle:""}})],1)],1)}),c=[],l=(n("99af"),n("a9e3"),n("5c96")),f=n.n(l),p=[];function d(e){null!=e?(0==p.length&&setTimeout(d),p.push(e)):(e=p.shift(),Object(l["Notification"])(e),p.length&&setTimeout(d,100))}var m=d,h={data:function(){return{noticeShow:!1}},props:{createAt:{type:Number,required:!0},countType:{type:String,required:!0},index:{type:Number,required:!0},dueDate:{type:Number,required:!1},history:{type:Array[Object],required:!1,default:function(){return[]}},countTitle:{type:String,required:!0}},computed:{lastOperateDate:function(){return this.history[this.history.length-1]||this.createAt},daysLeft:function(){var e=(this.dueDate-this.$store.state.timestamp)/864e5;return e},hasBeen:function(){return(this.$store.state.timestamp-this.lastOperateDate)/864e5},helpWord:function(){switch(this.countType){case"倒计时":return"距离计时结束还有";case"正计时":return"距离上次已经";default:return"出错了"}},daysWord:function(){var e="倒计时"===this.countType?this.daysLeft:this.hasBeen,t=3600*e*24,n=Math.floor(t/3600),o=Math.floor((t-3600*n)/60),r=Math.floor(t%60),i="".concat(n,"小时").concat(o,"分钟").concat(r,"秒");return e<0?(i="已经过期",this.noticeShow||"倒计时"!==this.countType||this.showError(),i):e<1?(this.noticeShow||"倒计时"!==this.countType||this.showWarning(i),i):"".concat(Math.floor(e),"天")}},methods:{removeSelf:function(){this.$store.commit("removeCount",this.index)},resetCount:function(){this.$store.commit("resetCount",this.index)},showWarning:function(e){m({title:"倒计时即将到期",message:'"'.concat(this.countTitle,'"倒计时将在').concat(e,"后到期"),type:"warning",duration:0}),this.noticeShow=!0},showError:function(){m({title:"倒计时已经到期",message:'"'.concat(this.countTitle,'"倒计时已经到期'),type:"error",duration:0}),this.noticeShow=!0}}},y=h,b=n("2877"),v=Object(b["a"])(y,s,c,!1,null,null,null),w=v.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"addForm",attrs:{model:e.form,rules:e.rules}},[n("el-form-item",{attrs:{label:"计时器标题",prop:"title",required:""}},[n("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),n("el-form-item",{attrs:{label:e.form.type?"倒计时":"正计时",prop:"type"}},[n("el-switch",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),n("transition",{attrs:{name:"el-fade-in-linear"}},[e.form.type?n("el-form-item",{attrs:{label:"结束日期模式",prop:"dueDateSetType"}},[n("el-radio-group",{model:{value:e.form.dueDateSetType,callback:function(t){e.$set(e.form,"dueDateSetType",t)},expression:"form.dueDateSetType"}},[n("el-radio",{attrs:{label:"天数"}}),n("el-radio",{attrs:{label:"日期"}})],1)],1):e._e()],1),n("transition",{attrs:{name:"el-fade-in-linear"}},[e.form.type?n("div",[n("transition",{attrs:{name:"el-fade-in",mode:"out-in"}},["日期"===e.form.dueDateSetType?n("el-form-item",{key:"日期选择",attrs:{label:"倒计时结束日期",prop:"date1"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":e.pickerOptions,type:"datetime",placeholder:"选择日期","value-format":"timestamp"},model:{value:e.form.date1,callback:function(t){e.$set(e.form,"date1",t)},expression:"form.date1"}})],1):n("el-form-item",{key:"计时天数",attrs:{label:"计时天数",prop:"countDays"}},[n("el-input-number",{attrs:{min:1},model:{value:e.form.countDays,callback:function(t){e.$set(e.form,"countDays",t)},expression:"form.countDays"}})],1)],1)],1):e._e()]),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")]),n("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)},D=[],T={data:function(){return{form:{title:"",type:!1,date1:"",countDays:1,dueDateSetType:"日期"},pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5},shortcuts:[{text:"明天",onClick:function(e){var t=new Date;t.setTime(t.getTime()+864e5),e.$emit("pick",t)}},{text:"三天后",onClick:function(e){var t=new Date;t.setTime(t.getTime()+2592e5),e.$emit("pick",t)}},{text:"下周",onClick:function(e){var t=new Date;t.setTime(t.getTime()+6048e5),e.$emit("pick",t)}}]},rules:{date1:[{validator:function(e,t,n){return t>Date.now()?n():n(new Error("日期必须晚于当前时间"))},trigger:"blur"}]}}},methods:{addCount:function(e){if(e){var t={countTitle:this.form.title,countType:this.form.type?"倒计时":"正计时"};this.form.type?"日期"===this.form.dueDateSetType?t.dueDate=this.form.date1:t.dueDate=Date.now()+864e5*this.form.countDays:t.dueDate=new Date(2099,11,30).getTime(),this.$store.commit("addCount",t),this.resetForm()}},onSubmit:function(){this.$refs.addForm.validate(this.addCount)},resetForm:function(){this.$refs["addForm"].resetFields()}}},k=T,x=Object(b["a"])(k,g,D,!1,null,null,null),S=x.exports,C=n("2ef0"),O=n.n(C),_={components:{CounterListItem:w,AddCounter:S},computed:{countDownMap:function(){return O.a.values(this.$store.state.countDownMap)}}},$=_,j=Object(b["a"])($,a,u,!1,null,null,null),M=j.exports,A={name:"app",components:{CounterPage:M}},F=A,P=Object(b["a"])(F,r,i,!1,null,null,null),q=P.exports,E=n("2f62"),N=n("0e44");o["default"].use(E["a"]);var W=new E["a"].Store({state:{countDownMap:{},currentCount:0,timestamp:Date.now()},mutations:{editCount:function(e,t){var n=e.countDownMap[t.index];Object.assign(n,t)},removeCount:function(e,t){o["default"].delete(e.countDownMap,t)},addCount:function(e,t){t.index=e.currentCount++,t.createAt=e.timestamp,t.history=[],o["default"].set(e.countDownMap,t.index,t)},resetCount:function(e,t){var n=O.a.clone(e.countDownMap[t]),r=n.history[n.history.length-1]||n.createAt,i=r,a=n.dueDate,u=e.timestamp;n.history.push(u),n.dueDate=u+a-i,o["default"].set(e.countDownMap,t,n)},setTimestamp:function(e){e.timestamp+=1e3}},actions:{},modules:{},plugins:[Object(N["a"])({paths:["countDownMap","currentCount"]})]});setInterval((function(){return W.commit("setTimestamp")}),1e3);var L=W;n("0fae");o["default"].use(f.a);var B=n("9483");Object(B["a"])("".concat("/countdown1/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),o["default"].config.productionTip=!1,new o["default"]({store:L,render:function(e){return e(q)}}).$mount("#app")}});
//# sourceMappingURL=app.dc2a2514.js.map